# Проблематика

Во многих компаниях есть задачи, находящиеся в некоей пограничной зоне:

Например, приходит к инженеру PM и говорит: "Нам бы сделать так, чтобы при переводе задачи с Петра на Олега, у неё менялся на такой-то". В зависимости от, иногда инженер предлагает купить плагин, иногда реализует какой-то костыль, иногда просто не до того и задача остаётся в каком-нибудь беклоге, письменном или "про это мы помним".

А лично мне часто надо поулчить от какой-то системы немного дополнительный функционал. Например, ограничить выполнение задач так, чтобы одновременно не выполнялось более одной или нескольких однотипных. Это могут быть деплои в какое-то окружение, тяжелые аналитические задачи, заказ пиццы или что угодно ещё.

Если бы мир был идеальным, то у меня был бы какой-то Consul, etcd или ZooKeeper и я просто лочил там сессию. Или положился бы на нашу платформу оркестрации, в которой выставил бы какой-нибудь `parallelism` или `prohibit_overlap`. Наверняка, есть и другие варианты, но в моей арсенальной карте все подходы сводятся к одному - найти какой-то источник истины и создать там соответствующую запись на время выполнения одной задачи, чтобы другие её видели. Мир, к сожалению, таков, что такого источника истины часто нет и его просто не всегда можно оперативно завести либо качественно поддерживать.

Поэтому, когда очередная класная-*атласная* (да, это намёк) CI-система сказала, что конкурентность она лимитировать умеет [довольно специфически](https://support.atlassian.com/bitbucket-cloud/docs/deployment-concurrency-control/), а именно, ставя задачи на паузу, пока человек не придёт и не пнёт её вручную.

ЭТО ПЛОХО

# Решение

## Как всё работает

Картинка

ASCIINEMA

## Планы

# Приглашение к разработке
